{% extends "layouts/base.njk" %}

{% block content %}
<section class="product-page">
  <div class="container">

    {# ===============================
       FEATURED PRODUCT IMAGE
       (ALWAYS shows if images[] exists)
       =============================== #}
    {% if page.data.images and page.data.images.length %}
      <section class="product-featured-image">
        <img
          src="{{ page.data.images[0] }}"
          alt="{{ title }}"
          loading="eager"
        >
      </section>
    {% endif %}

    {# ===============================
       PRODUCT GALLERY
       (ONLY gallery images, NEVER images[])
       =============================== #}
    {% if page.data.gallery %}
      {% set galleryImages = page.data.gallery | slice(1) %}
      {% if galleryImages.length %}
        <section class="product-gallery-section">
          <div class="product-gallery-grid">
            {% for image in galleryImages %}
              <div class="product-gallery-item">
                <img
                  src="{{ image }}"
                  alt="{{ title }} â€“ gallery image {{ loop.index }}"
                  loading="lazy"
                >
              </div>
            {% endfor %}
          </div>
        </section>
      {% endif %}
    {% endif %}

    {# ===============================
       PRODUCT CONTENT
       =============================== #}
    <div class="prose max-w-none product-content">
      {{ content | safe }}
    </div>

  </div>
</section>
{% endblock %}
