{% extends "layouts/base.njk" %}

{% block content %}
<section class="product-page">
  <div class="container">

    {# ===============================
       PRODUCT GALLERY (SINGLE SOURCE, SAFE)
       Priority:
       1) gallery[]
       2) images[] fallback
       =============================== #}

    {% set productImages = page.data.gallery
      if page.data.gallery and page.data.gallery.length
      else page.data.images
    %}

    {% if productImages and productImages.length %}
      <section class="product-gallery-section">
        <div class="product-gallery-grid">
          {% for image in productImages %}
            <div class="product-gallery-item">
              <img
                src="{{ image | url }}"
                alt="{{ title }} image {{ loop.index }}"
                loading="lazy"
              >
            </div>
          {% endfor %}
        </div>
      </section>
    {% endif %}

    {# ===============================
       PRODUCT CONTENT
       =============================== #}
    <div class="prose max-w-none product-content">
      {{ content | safe }}
    </div>

  </div>
</section>
{% endblock %}
