{% extends "layouts/base.njk" %}

{% block content %}
<section class="collection-page">
  <div class="container">

    {# ===============================
       COLLECTION HEADER (CENTERED)
       =============================== #}
    <header class="collection-header">
      <h1 class="collection-title">{{ title }}</h1>

      {% if description %}
        <p class="collection-description">
          {{ description }}
        </p>
      {% endif %}
    </header>

    {# ===============================
       COLLECTION SOURCE LOGIC (DO NOT TOUCH)
       =============================== #}
    {% if collectionKey %}
      {% set items = collections.all
        | selectattr("data.collection", "equalto", collectionKey)
        | list %}
    {% else %}
      {% set items = collections[tag] %}
    {% endif %}

    {% if items and items.length %}
      <div class="collection-grid">
        {% for item in items %}
          <a href="{{ item.url }}" class="collection-card">
            <img
              src="{{ item.data.images[0] or '/static/img/placeholders/product-coming-soon.jpg' }}"
              alt="{{ item.data.title }}"
              loading="lazy"
            >
            <div class="collection-card-text">
              <h3>{{ item.data.title }}</h3>
              {% if item.data.price %}
                <p class="price">${{ item.data.price }} USD</p>
              {% endif %}
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p style="opacity:.6; text-align:center;">
        No products found for this collection.
      </p>
    {% endif %}

  </div>
</section>
{% endblock %}
